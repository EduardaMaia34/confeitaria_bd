<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Novo Pedido - Petit Rose</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Abhaya Libre ExtraBold', serif;
      background-color: #fffbe6;
      color: #710100;
    }
    .navbar {
      margin: 20px 10px 0 10px;
      background-color: #fcb1b0;
      padding: 4px 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid #fcb1b0;
      border-radius: 10px;
    }
    .navbar-logo {
      height: 50px;
      border-radius: 12px;
    }
    .navbar-menu {
      display: flex;
      align-items: center;
      gap: 30px;
    }
    .navbar-menu a {
      text-decoration: none;
      color: #710100;
      font-size: 18px;
      padding: 6px 12px;
      border-radius: 12px;
    }
    .navbar-menu .ativo {
      background-color: #fffbe6;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding-top: 20px;
      padding-bottom: 30px;
      padding-left: 50px;
      padding-right: 50px;
      background-color: #fff8e5;
      border-radius: 16px;
      box-shadow: 0 0 5px #fcb1b0;
      border-top: 1px solid #ffd7c9;
      border-right: 4px solid #ffd7c9;
      border-bottom: 4px solid #ffd7c9;
      border-left: 1px solid #ffd7c9;
    }
    h2 {
      font-size: 32px;
      margin-bottom: 30px;
      text-align: center;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 12px;
      border: 1px solid #fcb1b0;
      background-color: #ffeae4;
      font-size: 15px;
    }
    .linha {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
    }
    .nome-cliente {
      flex: 1.4;
    }
    .telefone-menor {
      flex: 0.4;
    }
    .quantidade-wrapper {
      display: flex;
      gap: 20px;
      align-items: flex-end;
      justify-content: flex-start;
      flex-wrap: wrap;
      flex: 1;
    }
    .quantidade-control {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 5px;
    }
    .quantidade-control input {
      width: 60px;
      text-align: center;
    }
    .quantidade-control button {
      background-color: #fcb1b0;
      color: #710100;
      border: none;
      font-weight: bold;
      font-size: 18px;
      width: 32px;
      height: 32px;
      border-radius: 10px;
      cursor: pointer;
    }
    .btn-add-item, .btn-add-pedido {
      background-color: #710100;
      color: #fffbe6;
      padding: 12px 28px;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      cursor: pointer;
    }
    .lista-itens {
      background-color: #ffeae4;
      border: 1px solid #fcb1b0;
      border-radius: 12px;
      padding: 20px;
      margin-top: 15px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .item-linha {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 0;
      border-bottom: 1px dashed #fcb1b0;
    }
    .trash {
      font-size: 18px;
      cursor: pointer;
      color: red;
    }
    .cliente-resultado {
      margin-top: -10px;
      margin-bottom: 15px;
      font-size: 14px;
      color: #710100;
    }
    .rodape-pedido {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 40px;
    }
    .total {
      font-size: 18px;
    }
    @media (max-width: 768px) {
      .linha {
        flex-direction: column;
      }
      .rodape-pedido {
        flex-direction: column-reverse;
        gap: 20px;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="navbar">
    <img src="LogoBarra.png" alt="Logo Petit Rose" class="navbar-logo" />
    <div class="navbar-menu">
      <a href="#">In√≠cio</a>
      <a href="#">Produtos</a>
      <a href="#" class="ativo">Pedidos</a>
      <a href="#">Clientes</a>
      <a href="#">Relat√≥rios</a>
      <a href="#">Sair</a>
    </div>
  </div>

  <div class="container">
    <h2>Novo Pedido</h2>

    <div class="linha">
      <div class="nome-cliente">
        <label for="nomeCliente">Nome do Cliente</label>
        <input id="nomeCliente" type="text" placeholder="Digite o nome do cliente" oninput="verificarCliente(this.value)" />
        <div class="cliente-resultado" id="resultadoCliente"></div>
      </div>
      <div class="telefone-menor">
        <label for="telefoneCliente">Telefone</label>
        <input id="telefoneCliente" type="text" placeholder="(00) 90000-0000" />
      </div>
    </div>

    <div class="linha">
      <div style="flex: 1">
        <label for="produto">Produto</label>
        <select id="produto">
          <option disabled selected>Selecione um produto</option>
        </select>
      </div>
      <div class="quantidade-wrapper">
        <div>
          <label>Quantidade</label>
          <div class="quantidade-control">
            <button id="menos" type="button">-</button>
            <input type="text" id="quantidade" value="1" />
            <button id="mais" type="button">+</button>
          </div>
        </div>
        <button class="btn-add-item" type="button" onclick="adicionarItem()">+ Adicionar Item</button>
      </div>
    </div>

    <h3>Itens do Pedido</h3>
    <div class="lista-itens" id="listaItens">
      Nenhum item adicionado.
    </div>

    <div class="rodape-pedido">
      <div class="total" id="totalPedido">Total: R$ 0,00</div>
      <button class="btn-add-pedido" type="button" onclick="finalizarPedido()">+ Adicionar Pedido</button>
    </div>
  </div>

  <script>
    // Simula produtos carregados do banco
    const produtos = [
      { nome: "Bolo de Chocolate", preco: 50.0 },
      { nome: "Cupcake Morango", preco: 15.0 },
      { nome: "P√£o de Queijo", preco: 5.5 },
      { nome: "Torta de Lim√£o", preco: 30.0 }
    ];

    // Popula o select de produtos
    const produtoSelect = document.getElementById("produto");
    produtos.forEach(p => {
      const option = document.createElement("option");
      option.value = p.nome;
      option.dataset.preco = p.preco;
      option.textContent = `${p.nome} - R$ ${p.preco.toFixed(2)}`;
      produtoSelect.appendChild(option);
    });

    function verificarCliente(nome) {
      const resultado = document.getElementById("resultadoCliente");
      if (nome.trim().length === 0) {
        resultado.innerHTML = "";
        return;
      }
      // Simula√ß√£o: banco est√° vazio
      resultado.innerHTML = `Cliente n√£o encontrado. <a href="#" style="color:#710100; font-weight:bold; text-decoration:underline;">Cadastrar novo cliente</a>`;
    }

    const btnMais = document.getElementById("mais");
    const btnMenos = document.getElementById("menos");
    const inputQtd = document.getElementById("quantidade");

    btnMais.addEventListener("click", () => {
      let valor = parseInt(inputQtd.value) || 1;
      inputQtd.value = valor + 1;
    });

    btnMenos.addEventListener("click", () => {
      let valor = parseInt(inputQtd.value) || 1;
      if (valor > 1) {
        inputQtd.value = valor - 1;
      }
    });

    let total = 0;
    let itensPedido = [];

    function formatarMoeda(valor) {
      return valor.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    }

    function adicionarItem() {
      const produto = produtoSelect.value;
      const preco = parseFloat(produtoSelect.options[produtoSelect.selectedIndex].dataset.preco);
      const qtd = parseInt(inputQtd.value);

      if (!produto || isNaN(preco)) {
        alert("Selecione um produto v√°lido.");
        return;
      }
      if (isNaN(qtd) || qtd < 1) {
        alert("Quantidade inv√°lida.");
        return;
      }

      const subtotal = qtd * preco;
      total += subtotal;

      // Cria item no array
      itensPedido.push({ produto, qtd, subtotal });

      const lista = document.getElementById("listaItens");
      if (lista.textContent.trim() === "Nenhum item adicionado.") {
        lista.innerHTML = "";
      }

      // Cria elemento visual
      const itemDiv = document.createElement("div");
      itemDiv.className = "item-linha";
      itemDiv.innerHTML = `
        <span>${produto} - ${qtd}x - ${formatarMoeda(subtotal)}</span>
        <span class="trash" onclick="removerItem(this, ${subtotal})">üóëÔ∏è</span>
      `;
      lista.appendChild(itemDiv);

      atualizarTotal();
    }

    function removerItem(elemento, subtotal) {
      const index = Array.from(elemento.parentElement.parentElement.children).indexOf(elemento.parentElement);
      itensPedido.splice(index, 1); // Remove do array

      elemento.parentElement.remove();
      total -= subtotal;
      atualizarTotal();

      const lista = document.getElementById("listaItens");
      if (lista.children.length === 0) {
        lista.innerHTML = "Nenhum item adicionado.";
        total = 0;
        itensPedido = [];
      }
    }

    function atualizarTotal() {
      total = itensPedido.reduce((acc, item) => acc + item.subtotal, 0);
      document.getElementById("totalPedido").textContent = `Total: ${formatarMoeda(total)}`;
    }

    function finalizarPedido() {
      const nomeCliente = document.getElementById("nomeCliente").value.trim();
      const telefoneCliente = document.getElementById("telefoneCliente").value.trim();

      if (!nomeCliente) {
        alert("Informe o nome do cliente.");
        return;
      }
      if (itensPedido.length === 0) {
        alert("Adicione pelo menos um item ao pedido.");
        return;
      }

      // Simula√ß√£o de envio dos dados
      const pedido = {
        cliente: nomeCliente,
        telefone: telefoneCliente,
        itens: itensPedido,
        total: total
      };
      console.log("Pedido enviado:", pedido);
      alert("Pedido adicionado com sucesso!");

      // Resetar campos
      document.getElementById("nomeCliente").value = "";
      document.getElementById("telefoneCliente").value = "";
      document.getElementById("produto").selectedIndex = 0;
      document.getElementById("quantidade").value = 1;
      document.getElementById("listaItens").innerHTML = "Nenhum item adicionado.";
      total = 0;
      itensPedido = [];
      atualizarTotal();
      document.getElementById("resultadoCliente").innerHTML = "";
    }
  </script>
</body>
</html>
